intro
=====
-Oracle allows doing so using an object called sequences.
-A Sequences is an independent DB objects that can be used with any table requires automatic generation of unique numbers.
-A Sequences is usally a choice when a unique auto number either in ascending or descending order needs to be assigned to a primary key column
-Oracle allows setting intervals between the number generated by the sequences.
-it allows caching the sequences number in memory to speed up their availablity.

Creating Sequences
==================
-A sequences is createed using CREATE Sequence command

Sytnax
	CREATE SEQUENCE <SequenceName>
	[INCREMENT BY <integervalue>
	START WITH <IntegerValue>
	MAXVALUE <IntegerValue>/NOMAXVALUE
	MINVALUE <IntegerValue>/NOMINVALUE
	CYCLE/NOCYCLE
	CACHE<IntegerValue>/NOCACHE
	ORDER/NOORDER]

Parameter	usages and Description
INCREMENT BY	INCREMENT BY 1
		-Indicates the interval between sequence numbers.
		-this integer value:
		*Can be any positive or negative integer
		*Cannot be 0
		*Can have 28 or fewer digits
		-The absolute of this value must be less than the difference of MAXVALUE and MINVALUE.
		-if this value is negative, then sequence desends.
		-if the increment is positive, then the sequence ascends.
		-if ommits, the interval defaults to 1.
START WITH	-START WITH 1000
		-this clause is used to either
		*Start an ascending sequence at a value greater than its minimum.
		Or
		*start a descending sequences at a value less then its maximum.
		-This integer value.
		*Can have 28 or fewer digits
		*Defaults to the minimum value of the sequences for ascending sequences
		*Defaults to the maximum value of the sequences for descedning sequences.
MAXVALUE	-MAXVALUE 99999999
		-indicates the maximum value the sequences can generate.
		-this integer value.
		*Can have 28 or fewer digits
		*must be equal to or greater START WITH.
		AND
		*Must be greater than MINVALUE.
NOMAXVALUE	-NOMAXVALUE
		-Indicates a maximum value of 1 and 27 zeros for an ascending sequences or -1 for descending sequences
		-this is the default
MINVALUE	-MINVALUE=1
		-Indicates the minimum value of the sequences
		-this integer value
		*Can have 28 or fewer digits
		*Must be less or equal to START WITH
		*Must be less than MAXVALUE
NOMINVALUE	-NOMINVALUE
		-Indicates a minimum value of 1 for an ascending sequences or -1026 for a descending sequences
		-this is the default
CYCLE		-CYCLE
		-Indicates that the sequences continues to generate values after reaching either its maximum or minimum 		value.
		-After an ascending sequences reaches its maximum value, its generates its minimum value.
		-After a descending sequences reaches its minimum , its generates its maximum.
NOCYCLE		-NOCYCLE
		-indicates that the sequences cannot generate more values after reaching its maximum or minimum value
		-this is the default
CACHE		-CACHE 10
		-Indicates the number of sequences values that will be pre-allocated and kept in the memory for faster 		access
		-this integer value
		*Can have 28 or fewer digits
		*Must be less or equal to 2
		*Must be less than the number of values in the cycle for sequences that cycle. values beyond the cycle's 		capactity cannot be cached.
		-If a system failures occurs, all cached sequences values that have not been used in committed DML 		statements are lost. the potential number of lost values is equals to the value of CACHE parameters
NOCACHE		-NOCACHE
		-Indicates the values of the sequences are not pre-allocated
		-If both CACHE and NOCACHE are omitted, the default is to cache 20 sequence numbers
ORDER		-ORDER
		-Indicates that sequences number are generated in order of request
		-this parameter is useful if the sequences numbers are used as timestamps
		-Guaranteeing order is usually not important for sequences used to generate primary keys
		-ORDER is necessary only to guarantee ordered generation if oracle with RAC is in use
		-In an exclusive mode, sequences number are always generated in Order.
NOORDER		-NOORDER
		-Indicates no gurantee is required for the order of sequences number generated.
		-this is the defaults.

**The ORDER, NOORDER clause has no significance, if oracle is configured with Single server options.

Retrieving the current and next sequence value
==============================================
-Sequence value can be referred or retrieved using SQL statements with the help of the following pseudo columns
*CURRVAL: returns the current value of the sequences.
*NEXTVAL: increments the sequences and returns the next value.
-CURRVAL and NEXTVAL pseduo columns must be qualified with the name of the sequence.

Sytnax
	<SequenceName>.CURRVAL
	<SequenceName>.NEXTVAL

-To refer to the current or next value of a sequence in the schema of another user qualify the sequence with the schema containing it

Sytnax
	<SchemaName>.<SequenceName>.CURRVAL
	<SchemaName>.<SequenceName>.NEXTVAL	
-the aboe will work only if appropriate permission on that schema exists
-To Refer to the value of a sequence on a remote database, qualify the sequence with a complete or partial name of a database link:


Sytnax
	<SchemaName>.<SequenceName>.CURRVAL@DBLink
	<SchemaName>.<SequenceName>.NEXTVAL@DBLink

NEXTVAL
-------
-After a sequence is created using the CREATE SEQUENCE command the next value can be retrieved as.
	SELECT <SequenceName>.NextVal From dual;
-This query displays the next value held in the cache.
-The every first reference to NEXTVAL returns the sequences's initial value
-Subsequent references to NEXTVAL increments the sequences value by the defined increment and returns the new value.

CURRVAL
-------
-The following query extracts the current value in the seqeuence
	SELECT <SequenceName>.CURRVAL FROM Dual;

NEXTVAL and CURRVAL Usage
-------------------------
Both the pseudo columns can be used in
-The SELECT list of the SELECT statements that is not contained in a subquery, materialized view or view
	Select SQ_DEPNO.nextval, department_name from departments;
-The SELECT list of a subquery in an INSERT statements
	INSERT INTO Departments(Department_id,department_name) values(select sq_deptno.NextVal,department_name from 		departments);
-The VALUES clause of an INSERT statements
	INSERT INTO Departments(department_id,department_name) VALUES(sq_deptno.NEXTVAL,'Accounts');
-The SET Clause of an UPDATE statment
	UPDATE Departments
	SET Deptno =sq_depno.NEXTVAL
	WHERE Department_name='Accounts';

NEXTVAL and CURRVAL Restrictions
--------------------------------
the CURRVAL and NEXTVAL pseduo columns cannot be used in
-A subquery in a DELETE ,SELECT or UPDATE statements.
-A query of a view or of a materialized view.
-A SELECT statement with the DISTINCT operator
-A SELECT statement with a GROUP BY clause or ORDER BY clause
-A SELECT statement that is combined with another SELECT statements with the UNION ,INTERSECT or MINUS set operator
-The WHERE clause of a SELECT statements
-DEFAULT value of a column in a CREATE TABLE or ALTER TABLE Statements
-the Conditions of a CHECK constraints


Modifying an existing sequences
-------------------------------
- A sequence after it is created can be modified using the ALTER sequence command.
Sytnax
	ALTER Sequence <SequenceName>
	[INCREMENT BY <Integervalue>
	MAXVALUE<IntegerValue>/NOMAXVALUE
	MINVALUE<IntegerValue>/NOMINVALUE CYCLE/NOCYCLE
	CACHE <Integervalue>/NOCHACHE ORDER/NOORDER]

-the START value of the sequence canot be altered.

-this disadvantages of creating a sequence with a chace is that if a system failures occurs, all cached sequence values that have not been used, are lost.
-This results in a gap in the assigned sequence values.When the system comes backup, Oracle caches new numbers from where it left off in the sequence, ignoring the so called lost sequence values.
-NOCACHE means that non of the sequence values are stored in memory.
-this options reduces performance to some extent, however, it ensures that no gap occurs in the assigned sequences value in case of system failures

Dropping A Sequences
====================
-the DROP Sequence command is used to remove the sequence from the DB.

Sytnax
	DROP Sequence <sequenceName>;

Sequence in PL/SQL
==================

Prior to Oracle 11g code spec

Oracle 11g onwords

Query Existing sequences
========================
-Oracle stores all the informations related to the sequences created in the users_sequences table
-this tables describes all sequences owned by the current user.

the table holds the following columns
-------------------------------------
column Name		Description
-----------		-----------
SEQUENCE_NAME		SEQUENECE name
MIN_VALUE		Minimum value of the sequence
MAX_VALUE		maximum value of the sequence
INCREMENT BY		value by which sequenceis incremented.
CYCLE_FLAG		value that indicates if the sequence will wrap on reaching the limit
ORDER_FLAG		value that indicates if the sequence numbers are generated in order
CACHE_SIZE		number of sequence number to cache
LAST_NUMBER		last sequence number written to disk




	

	




